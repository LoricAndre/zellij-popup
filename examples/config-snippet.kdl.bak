// Add this to your ~/.config/zellij/config.kdl

// Load the plugin
plugins {
    popup {
        path "~/.config/zellij/plugins/zellij-popup.wasm"
    }
}

// Add keybindings
keybinds {
    shared_except "locked" {
        // Toggle htop with Alt-h
        bind "Alt h" {
            MessagePlugin "popup" {
                name "toggle"
                payload "{\"name\":\"htop\",\"command\":\"htop\"}"
            }
        }

        // Toggle lazygit with Alt-g
        bind "Alt g" {
            MessagePlugin "popup" {
                name "toggle"
                payload "{\"name\":\"git\",\"command\":\"lazygit\"}"
            }
        }

        // Toggle terminal with Alt-t
        bind "Alt t" {
            MessagePlugin "popup" {
                name "toggle"
                payload "{\"name\":\"terminal\",\"command\":\"zsh\"}"
            }
        }

        // Toggle server with Alt-s
        bind "Alt s" {
            MessagePlugin "popup" {
                name "toggle"
                payload "{\"name\":\"server\",\"command\":\"npm run dev\"}"
            }
        }

        // Toggle logs with Alt-l
        bind "Alt l" {
            MessagePlugin "popup" {
                name "toggle"
                payload "{\"name\":\"logs\",\"command\":\"tail -f /var/log/syslog\"}"
            }
        }
    }
}
